datos <- left_join(datos, m_miembros, by = c("conglome", "vivienda", "hogar", "codperso"))
datos <- datos %>% rename(edad =p208a)
table(datos$edad, useNA = "alw")
jovenes <- datos %>% filter(edad >= 15 & edad <= 29)
table(jovenes$edad, useNA = "alw")
rm(datos, m_educacion, m_empleo, m_miembros)
table(jovenes$p204, useNA = "alw")
table(jovenes$p205, useNA = "alw")
table(jovenes$p206, useNA = "alw")
jovenes <- jovenes %>% mutate(residencia = ifelse((p204 == 1 & p205 == 2) | (p204 == 2 & p206 == 1), 1, 0))
table(jovenes$residencia, useNA = "alw")
jovenes <- jovenes %>% filter(residencia == 1)
table(jovenes$residencia, useNA = "alw")
jovenes$departamento <- as.numeric(substr(jovenes$ubigeo, 1, 2))
jovenes <- jovenes %>% mutate(departamento = recode(departamento, '1' = "Amazonas", '2' = "Ancash", '3' = "Apurímac",
'4' = "Arequipa", '5' = "Ayacucho", '6' = "Cajamarca", '7' = "Callao",
'8' = "Cusco", '9' = "Huancavelica", '10' = "Huánuco", '11' = "Ica",
'12' = "Junín", '13' = "La Libertad", '14' = "Lambayeque", '15' = "Lima",
'16' = "Loreto", '17' = "Madre de Dios", '18' = "Moquegua",
'19' = "Pasco", '20' = "Piura", '21' = "Puno", '22' = "San Martín",
'23' = "Tacna", '24' = "Tumbes", '25' = "Ucayali"))
table(jovenes$departamento, useNA = "alw")
table(jovenes$estrato, useNA = "alw")
jovenes <- jovenes %>% mutate( area = ifelse(estrato>=1 & estrato<=5, "Urbano", ifelse(estrato>=6 & estrato<=8, "Rural", NA )))
table(jovenes$area, useNA = "alw")
table(jovenes$p207, useNA = "alw")
jovenes <- jovenes %>% mutate(sexo = ifelse(p207==1, "Hombre", ifelse(p207==2, "Mujer", NA)))
table(jovenes$sexo, useNA = "alw")
table(jovenes$dominio, useNA = "alw")
jovenes <- jovenes %>% mutate(region = ifelse( (dominio>=1 & dominio<=3) | dominio==8, "Costa",
ifelse(dominio>=4 & dominio<=6, "Sierra",
ifelse(dominio==7, "Selva", NA))))
table(jovenes$region, useNA = "alw")
table(jovenes$edad, useNA = "alw")
jovenes <- jovenes %>% mutate(gedad = case_when( edad %in% c(15:17) ~ "De 15 a 17 años",
edad %in% c(18:24) ~ "De 18 a 24 años",
edad %in% c(25:29) ~ "De 25 a 29 años"))
table(jovenes$gedad, useNA = "alw")
table(jovenes$p301a.x, useNA = "alw")
jovenes <- jovenes %>% mutate(nivel_educ = ifelse( (p301a.x>=1 & p301a.x<=4) | p301a.x==12, "Primaria",
ifelse( (p301a.x>=5 & p301a.x<=6), "Secundaria",
ifelse( (p301a.x>=7 & p301a.x<=8), "SNU",
ifelse( (p301a.x>=9 & p301a.x<=11), "SU", NA)))))
table(jovenes$nivel_educ, useNA = "alw")
table(jovenes$p300a, useNA = "alw")
jovenes <- jovenes %>% mutate(lengua = ifelse(p300a==4, "Castellanno", "Lengua nativa"))
table(jovenes$lengua, useNA = "alw")
table(jovenes$ocu500, useNA = "alw")
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(p307 = ifelse(is.na(p307), 2, p307))
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(nini = ifelse( (ocu500==3 | ocu500==4) & (p307==2), 1, 0))
table(jovenes$nini, useNA = "alw")
jovenes <- jovenes %>% select(departamento, area, sexo, region, gedad, nivel_educ, lengua, nini, conglome, estrato, fac500a)
save(jovenes, file=paste("./joevenes15a29.RData",sep="/"))
load(paste("./joevenes15a29.RData",sep="/"))
encuesta = svydesign(data=jovenes, id=~conglome, strata=~estrato, weights=~fac500a)
nini <- svymean(~nini, encuesta, deff=F, na.rm=T)
nini
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_dpto, digits = 2, col.names = c("Departamento", "Proporción Nini", "Error estándar"))
nini_area <- svyby(~nini, ~area, encuesta, svymean, deff=F, na.rm=T)
nini_area <- nini_area %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_area, digits = 2, col.names = c("Área de residencia", "Proporción Nini", "Error estándar"))
nini_sexo <- svyby(~nini, ~sexo, encuesta, svymean, deff=F, na.rm=T)
nini_sexo <- nini_sexo %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_sexo, digits = 2, col.names = c("Sexo", "Proporción Nini", "Error estándar"))
nini_region <- svyby(~nini, ~region, encuesta, svymean, deff=F, na.rm=T)
nini_region <- nini_region %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_region, digits = 2, col.names = c("Region natural", "Proporción Nini", "Error estándar"))
nini_edad <- svyby(~nini, ~gedad, encuesta, svymean, deff=F, na.rm=T)
nini_edad <- nini_edad %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_edad, digits = 2, col.names = c("Grupo de edad", "Proporción Nini", "Error estándar"))
nini_nivel_educ <- svyby(~nini, ~nivel_educ, encuesta, svymean, deff=F, na.rm=T)
nini_nivel_educ <- nini_nivel_educ %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_nivel_educ, digits = 2, col.names = c("Nivel educativo", "Proporción Nini", "Error estándar"))
nini_lengua <- svyby(~nini, ~lengua, encuesta, svymean, deff=F, na.rm=T)
nini_lengua <- nini_lengua %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_lengua, digits = 2, col.names = c("Lengua materna", "Proporción Nini", "Error estándar"))
View(nini_area)
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
rm(list=ls())
if (!require("haven")) install.packages("haven")
if (!require("tidyverse")) install.packages("tidyverse")
if (!require("foreign")) install.packages("foreign")
if (!require("survey")) install.packages("survey")
library(dplyr)
library(stringr)
library(knitr)
ruta <- "C:/Users/M S I/OneDrive/ymgc/notebook/r/pa_grupo3"
setwd(ruta)
getwd()
m_empleo <- read_dta(paste("./enaho01a-2023-500.dta",sep="/"))
m_educacion <- read_dta(paste("./enaho01a-2023-300.dta",sep="/"))
m_miembros <- read_dta(paste("./enaho01-2023-200.dta",sep="/"))
datos <- left_join(m_empleo, m_educacion, by = c("conglome", "vivienda", "hogar", "codperso"))
datos <- left_join(datos, m_miembros, by = c("conglome", "vivienda", "hogar", "codperso"))
datos <- datos %>% rename(edad =p208a)
table(datos$edad, useNA = "alw")
jovenes <- datos %>% filter(edad >= 15 & edad <= 29)
table(jovenes$edad, useNA = "alw")
rm(datos, m_educacion, m_empleo, m_miembros)
table(jovenes$p204, useNA = "alw")
table(jovenes$p205, useNA = "alw")
table(jovenes$p206, useNA = "alw")
jovenes <- jovenes %>% mutate(residencia = ifelse((p204 == 1 & p205 == 2) | (p204 == 2 & p206 == 1), 1, 0))
table(jovenes$residencia, useNA = "alw")
jovenes <- jovenes %>% filter(residencia == 1)
table(jovenes$residencia, useNA = "alw")
jovenes$departamento <- as.numeric(substr(jovenes$ubigeo, 1, 2))
jovenes <- jovenes %>% mutate(departamento = recode(departamento, '1' = "Amazonas", '2' = "Ancash", '3' = "Apurímac",
'4' = "Arequipa", '5' = "Ayacucho", '6' = "Cajamarca", '7' = "Callao",
'8' = "Cusco", '9' = "Huancavelica", '10' = "Huánuco", '11' = "Ica",
'12' = "Junín", '13' = "La Libertad", '14' = "Lambayeque", '15' = "Lima",
'16' = "Loreto", '17' = "Madre de Dios", '18' = "Moquegua",
'19' = "Pasco", '20' = "Piura", '21' = "Puno", '22' = "San Martín",
'23' = "Tacna", '24' = "Tumbes", '25' = "Ucayali"))
table(jovenes$departamento, useNA = "alw")
table(jovenes$estrato, useNA = "alw")
jovenes <- jovenes %>% mutate( area = ifelse(estrato>=1 & estrato<=5, "Urbano", ifelse(estrato>=6 & estrato<=8, "Rural", NA )))
table(jovenes$area, useNA = "alw")
table(jovenes$p207, useNA = "alw")
jovenes <- jovenes %>% mutate(sexo = ifelse(p207==1, "Hombre", ifelse(p207==2, "Mujer", NA)))
table(jovenes$sexo, useNA = "alw")
table(jovenes$dominio, useNA = "alw")
jovenes <- jovenes %>% mutate(region = ifelse( (dominio>=1 & dominio<=3) | dominio==8, "Costa",
ifelse(dominio>=4 & dominio<=6, "Sierra",
ifelse(dominio==7, "Selva", NA))))
table(jovenes$region, useNA = "alw")
table(jovenes$edad, useNA = "alw")
jovenes <- jovenes %>% mutate(gedad = case_when( edad %in% c(15:17) ~ "De 15 a 17 años",
edad %in% c(18:24) ~ "De 18 a 24 años",
edad %in% c(25:29) ~ "De 25 a 29 años"))
table(jovenes$gedad, useNA = "alw")
table(jovenes$p301a.x, useNA = "alw")
jovenes <- jovenes %>% mutate(nivel_educ = ifelse( (p301a.x>=1 & p301a.x<=4) | p301a.x==12, "Primaria",
ifelse( (p301a.x>=5 & p301a.x<=6), "Secundaria",
ifelse( (p301a.x>=7 & p301a.x<=8), "SNU",
ifelse( (p301a.x>=9 & p301a.x<=11), "SU", NA)))))
table(jovenes$nivel_educ, useNA = "alw")
table(jovenes$p300a, useNA = "alw")
jovenes <- jovenes %>% mutate(lengua = ifelse(p300a==4, "Castellano", "Lengua nativa"))
table(jovenes$lengua, useNA = "alw")
table(jovenes$ocu500, useNA = "alw")
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(p307 = ifelse(is.na(p307), 2, p307))
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(nini = ifelse( (ocu500==3 | ocu500==4) & (p307==2), 1, 0))
table(jovenes$nini, useNA = "alw")
jovenes <- jovenes %>% select(departamento, area, sexo, region, gedad, nivel_educ, lengua, nini, conglome, estrato, fac500a)
save(jovenes, file=paste("./joevenes15a29.RData",sep="/"))
load(paste("./joevenes15a29.RData",sep="/"))
encuesta = svydesign(data=jovenes, id=~conglome, strata=~estrato, weights=~fac500a)
nini <- svymean(~nini, encuesta, deff=F, na.rm=T)
nini
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_dpto, digits = 2, row.names = FALSE, col.names = c("Departamento", "Proporción Nini", "Error estándar"))
nini_area <- svyby(~nini, ~area, encuesta, svymean, deff=F, na.rm=T)
nini_area <- nini_area %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_area, digits = 2, row.names = FALSE, col.names = c("Área de residencia", "Proporción Nini", "Error estándar"))
nini_sexo <- svyby(~nini, ~sexo, encuesta, svymean, deff=F, na.rm=T)
nini_sexo <- nini_sexo %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_sexo, digits = 2, row.names = FALSE, col.names = c("Sexo", "Proporción Nini", "Error estándar"))
nini_region <- svyby(~nini, ~region, encuesta, svymean, deff=F, na.rm=T)
nini_region <- nini_region %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_region, digits = 2, row.names = FALSE, col.names = c("Region natural", "Proporción Nini", "Error estándar"))
nini_edad <- svyby(~nini, ~gedad, encuesta, svymean, deff=F, na.rm=T)
nini_edad <- nini_edad %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_edad, digits = 2, row.names = FALSE, col.names = c("Grupo de edad", "Proporción Nini", "Error estándar"))
nini_nivel_educ <- svyby(~nini, ~nivel_educ, encuesta, svymean, deff=F, na.rm=T)
nini_nivel_educ <- nini_nivel_educ %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_nivel_educ, digits = 2, row.names = FALSE, col.names = c("Nivel educativo", "Proporción Nini", "Error estándar"))
nini_lengua <- svyby(~nini, ~lengua, encuesta, svymean, deff=F, na.rm=T)
nini_lengua <- nini_lengua %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_lengua, digits = 2, row.names = FALSE, col.names = c("Lengua materna", "Proporción Nini", "Error estándar"))
rm(list=ls())
if (!require("haven")) install.packages("haven")
if (!require("tidyverse")) install.packages("tidyverse")
if (!require("foreign")) install.packages("foreign")
if (!require("survey")) install.packages("survey")
library(dplyr)
library(stringr)
library(knitr)
ruta <- "C:/Users/M S I/OneDrive/ymgc/notebook/r/pa_grupo3"
setwd(ruta)
getwd()
m_empleo <- read_dta(paste("./enaho01a-2023-500.dta",sep="/"))
m_educacion <- read_dta(paste("./enaho01a-2023-300.dta",sep="/"))
m_miembros <- read_dta(paste("./enaho01-2023-200.dta",sep="/"))
datos <- left_join(m_empleo, m_educacion, by = c("conglome", "vivienda", "hogar", "codperso"))
datos <- left_join(datos, m_miembros, by = c("conglome", "vivienda", "hogar", "codperso"))
datos <- datos %>% rename(edad =p208a)
table(datos$edad, useNA = "alw")
jovenes <- datos %>% filter(edad >= 15 & edad <= 29)
table(jovenes$edad, useNA = "alw")
rm(datos, m_educacion, m_empleo, m_miembros)
table(jovenes$p204, useNA = "alw")
table(jovenes$p205, useNA = "alw")
table(jovenes$p206, useNA = "alw")
jovenes <- jovenes %>% mutate(residencia = ifelse((p204 == 1 & p205 == 2) | (p204 == 2 & p206 == 1), 1, 0))
table(jovenes$residencia, useNA = "alw")
jovenes <- jovenes %>% filter(residencia == 1)
table(jovenes$residencia, useNA = "alw")
jovenes$departamento <- as.numeric(substr(jovenes$ubigeo, 1, 2))
jovenes <- jovenes %>% mutate(departamento = recode(departamento, '1' = "Amazonas", '2' = "Ancash", '3' = "Apurímac",
'4' = "Arequipa", '5' = "Ayacucho", '6' = "Cajamarca", '7' = "Callao",
'8' = "Cusco", '9' = "Huancavelica", '10' = "Huánuco", '11' = "Ica",
'12' = "Junín", '13' = "La Libertad", '14' = "Lambayeque", '15' = "Lima",
'16' = "Loreto", '17' = "Madre de Dios", '18' = "Moquegua",
'19' = "Pasco", '20' = "Piura", '21' = "Puno", '22' = "San Martín",
'23' = "Tacna", '24' = "Tumbes", '25' = "Ucayali"))
table(jovenes$departamento, useNA = "alw")
table(jovenes$estrato, useNA = "alw")
jovenes <- jovenes %>% mutate( area = ifelse(estrato>=1 & estrato<=5, "Urbano", ifelse(estrato>=6 & estrato<=8, "Rural", NA )))
table(jovenes$area, useNA = "alw")
table(jovenes$p207, useNA = "alw")
jovenes <- jovenes %>% mutate(sexo = ifelse(p207==1, "Hombre", ifelse(p207==2, "Mujer", NA)))
table(jovenes$sexo, useNA = "alw")
table(jovenes$dominio, useNA = "alw")
jovenes <- jovenes %>% mutate(region = ifelse( (dominio>=1 & dominio<=3) | dominio==8, "Costa",
ifelse(dominio>=4 & dominio<=6, "Sierra",
ifelse(dominio==7, "Selva", NA))))
table(jovenes$region, useNA = "alw")
table(jovenes$edad, useNA = "alw")
jovenes <- jovenes %>% mutate(gedad = case_when( edad %in% c(15:17) ~ "De 15 a 17 años",
edad %in% c(18:24) ~ "De 18 a 24 años",
edad %in% c(25:29) ~ "De 25 a 29 años"))
table(jovenes$gedad, useNA = "alw")
table(jovenes$p301a.x, useNA = "alw")
jovenes <- jovenes %>% mutate(nivel_educ = ifelse( (p301a.x>=1 & p301a.x<=4) | p301a.x==12, "Primaria",
ifelse( (p301a.x>=5 & p301a.x<=6), "Secundaria",
ifelse( (p301a.x>=7 & p301a.x<=8), "SNU",
ifelse( (p301a.x>=9 & p301a.x<=11), "SU", NA)))))
table(jovenes$nivel_educ, useNA = "alw")
table(jovenes$p300a, useNA = "alw")
jovenes <- jovenes %>% mutate(lengua = ifelse(p300a==4, "Castellano", "Lengua nativa"))
table(jovenes$lengua, useNA = "alw")
table(jovenes$ocu500, useNA = "alw")
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(p307 = ifelse(is.na(p307), 2, p307))
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(nini = ifelse( (ocu500==3 | ocu500==4) & (p307==2), 1, 0))
table(jovenes$nini, useNA = "alw")
jovenes <- jovenes %>% select(departamento, area, sexo, region, gedad, nivel_educ, lengua, nini, conglome, estrato, fac500a)
save(jovenes, file=paste("./joevenes15a29.RData",sep="/"))
load(paste("./joevenes15a29.RData",sep="/"))
encuesta = svydesign(data=jovenes, id=~conglome, strata=~estrato, weights=~fac500a)
nini <- svymean(~nini, encuesta, deff=F, na.rm=T)
nini
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_dpto, digits = 2, row.names = FALSE, col.names = c("Departamento", "Proporción Nini", "Error estándar"))
nini_area <- svyby(~nini, ~area, encuesta, svymean, deff=F, na.rm=T)
nini_area <- nini_area %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_area, digits = 2, row.names = FALSE, col.names = c("Área de residencia", "Proporción Nini", "Error estándar"))
nini_sexo <- svyby(~nini, ~sexo, encuesta, svymean, deff=F, na.rm=T)
nini_sexo <- nini_sexo %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_sexo, digits = 2, row.names = FALSE, col.names = c("Sexo", "Proporción Nini", "Error estándar"))
nini_region <- svyby(~nini, ~region, encuesta, svymean, deff=F, na.rm=T)
nini_region <- nini_region %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_region, digits = 2, row.names = FALSE, col.names = c("Region natural", "Proporción Nini", "Error estándar"))
nini_edad <- svyby(~nini, ~gedad, encuesta, svymean, deff=F, na.rm=T)
nini_edad <- nini_edad %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_edad, digits = 2, row.names = FALSE, col.names = c("Grupo de edad", "Proporción Nini", "Error estándar"))
nini_nivel_educ <- svyby(~nini, ~nivel_educ, encuesta, svymean, deff=F, na.rm=T)
nini_nivel_educ <- nini_nivel_educ %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_nivel_educ, digits = 2, row.names = FALSE, col.names = c("Nivel educativo", "Proporción Nini", "Error estándar"))
nini_lengua <- svyby(~nini, ~lengua, encuesta, svymean, deff=F, na.rm=T)
nini_lengua <- nini_lengua %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_lengua, digits = 2, row.names = FALSE, col.names = c("Lengua materna", "Proporción Nini", "Error estándar"))
```{r}
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_dpto, digits = 2, row.names = FALSE, col.names = c("Departamento", "Proporción Nini", "Error estándar"))
cv(nini_dpto)
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_dpto, digits = 2, row.names = FALSE, col.names = c("Departamento", "Proporción Nini", "Error estándar"))
cv(nini_dpto)
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
coef_variacion = round((se / nini) * 100, 2))
kable(nini_dpto, digits = 2, row.names = FALSE, col.names = c("Departamento", "Proporción Nini", "Error estándar" "CV"))
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
coef_variacion = round((se / nini) * 100, 2))
kable(nini_dpto, digits = 2, row.names = FALSE, col.names = c("Departamento", "Proporción Nini", "Error estándar" "Coe"))
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
coef_variacion = round((SE / nini) * 100, 2))
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
coef_variacion = round((SE / nini) * 100, 2))
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
nini_dpto
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
nini_dpto
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_dpto, digits = 2, row.names = FALSE,
col.names = c("Departamento", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
rm(list=ls())
if (!require("haven")) install.packages("haven")
if (!require("tidyverse")) install.packages("tidyverse")
if (!require("foreign")) install.packages("foreign")
if (!require("survey")) install.packages("survey")
library(dplyr)
library(stringr)
library(knitr)
ruta <- "C:/Users/M S I/OneDrive/ymgc/notebook/r/pa_grupo3"
setwd(ruta)
getwd()
m_empleo <- read_dta(paste("./enaho01a-2023-500.dta",sep="/"))
m_educacion <- read_dta(paste("./enaho01a-2023-300.dta",sep="/"))
m_miembros <- read_dta(paste("./enaho01-2023-200.dta",sep="/"))
datos <- left_join(m_empleo, m_educacion, by = c("conglome", "vivienda", "hogar", "codperso"))
datos <- left_join(datos, m_miembros, by = c("conglome", "vivienda", "hogar", "codperso"))
datos <- datos %>% rename(edad =p208a)
table(datos$edad, useNA = "alw")
jovenes <- datos %>% filter(edad >= 15 & edad <= 29)
table(jovenes$edad, useNA = "alw")
rm(datos, m_educacion, m_empleo, m_miembros)
table(jovenes$p204, useNA = "alw")
table(jovenes$p205, useNA = "alw")
table(jovenes$p206, useNA = "alw")
jovenes <- jovenes %>% mutate(residencia = ifelse((p204 == 1 & p205 == 2) | (p204 == 2 & p206 == 1), 1, 0))
table(jovenes$residencia, useNA = "alw")
jovenes <- jovenes %>% filter(residencia == 1)
table(jovenes$residencia, useNA = "alw")
jovenes$departamento <- as.numeric(substr(jovenes$ubigeo, 1, 2))
jovenes <- jovenes %>% mutate(departamento = recode(departamento, '1' = "Amazonas", '2' = "Ancash", '3' = "Apurímac",
'4' = "Arequipa", '5' = "Ayacucho", '6' = "Cajamarca", '7' = "Callao",
'8' = "Cusco", '9' = "Huancavelica", '10' = "Huánuco", '11' = "Ica",
'12' = "Junín", '13' = "La Libertad", '14' = "Lambayeque", '15' = "Lima",
'16' = "Loreto", '17' = "Madre de Dios", '18' = "Moquegua",
'19' = "Pasco", '20' = "Piura", '21' = "Puno", '22' = "San Martín",
'23' = "Tacna", '24' = "Tumbes", '25' = "Ucayali"))
table(jovenes$departamento, useNA = "alw")
table(jovenes$estrato, useNA = "alw")
jovenes <- jovenes %>% mutate( area = ifelse(estrato>=1 & estrato<=5, "Urbano", ifelse(estrato>=6 & estrato<=8, "Rural", NA )))
table(jovenes$area, useNA = "alw")
table(jovenes$p207, useNA = "alw")
jovenes <- jovenes %>% mutate(sexo = ifelse(p207==1, "Hombre", ifelse(p207==2, "Mujer", NA)))
table(jovenes$sexo, useNA = "alw")
table(jovenes$dominio, useNA = "alw")
jovenes <- jovenes %>% mutate(region = ifelse( (dominio>=1 & dominio<=3) | dominio==8, "Costa",
ifelse(dominio>=4 & dominio<=6, "Sierra",
ifelse(dominio==7, "Selva", NA))))
table(jovenes$region, useNA = "alw")
table(jovenes$edad, useNA = "alw")
jovenes <- jovenes %>% mutate(gedad = case_when( edad %in% c(15:17) ~ "De 15 a 17 años",
edad %in% c(18:24) ~ "De 18 a 24 años",
edad %in% c(25:29) ~ "De 25 a 29 años"))
table(jovenes$gedad, useNA = "alw")
table(jovenes$p301a.x, useNA = "alw")
jovenes <- jovenes %>% mutate(nivel_educ = ifelse( (p301a.x>=1 & p301a.x<=4) | p301a.x==12, "Primaria",
ifelse( (p301a.x>=5 & p301a.x<=6), "Secundaria",
ifelse( (p301a.x>=7 & p301a.x<=8), "SNU",
ifelse( (p301a.x>=9 & p301a.x<=11), "SU", NA)))))
table(jovenes$nivel_educ, useNA = "alw")
table(jovenes$p300a, useNA = "alw")
jovenes <- jovenes %>% mutate(lengua = ifelse(p300a==4, "Castellano", "Lengua nativa"))
table(jovenes$lengua, useNA = "alw")
table(jovenes$ocu500, useNA = "alw")
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(p307 = ifelse(is.na(p307), 2, p307))
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(nini = ifelse( (ocu500==3 | ocu500==4) & (p307==2), 1, 0))
table(jovenes$nini, useNA = "alw")
jovenes <- jovenes %>% select(departamento, area, sexo, region, gedad, nivel_educ, lengua, nini, conglome, estrato, fac500a)
save(jovenes, file=paste("./joevenes15a29.RData",sep="/"))
load(paste("./joevenes15a29.RData",sep="/"))
encuesta = svydesign(data=jovenes, id=~conglome, strata=~estrato, weights=~fac500a)
nini <- svymean(~nini, encuesta, deff=F, na.rm=T)
nini
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_dpto, digits = 2, row.names = FALSE,
col.names = c("Departamento", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_area <- svyby(~nini, ~area, encuesta, svymean, deff=F, na.rm=T)
nini_area <- nini_area %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_area, digits = 2, row.names = FALSE, col.names = c("Área de residencia", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_sexo <- svyby(~nini, ~sexo, encuesta, svymean, deff=F, na.rm=T)
nini_sexo <- nini_sexo %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_sexo, digits = 2, row.names = FALSE, col.names = c("Sexo", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_region <- svyby(~nini, ~region, encuesta, svymean, deff=F, na.rm=T)
nini_region <- nini_region %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_region, digits = 2, row.names = FALSE, col.names = c("Region natural", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_edad <- svyby(~nini, ~gedad, encuesta, svymean, deff=F, na.rm=T)
nini_edad <- nini_edad %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_edad, digits = 2, col.names = c("Grupo de edad", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_nivel_educ <- svyby(~nini, ~nivel_educ, encuesta, svymean, deff=F, na.rm=T)
nini_nivel_educ <- nini_nivel_educ %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_nivel_educ, digits = 2, col.names = c("Nivel educativo", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_lengua <- svyby(~nini, ~lengua, encuesta, svymean, deff=F, na.rm=T)
nini_lengua <- nini_lengua %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_lengua, digits = 2, col.names = c("Lengua materna", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
View(nini_area)
rm(list=ls())
if (!require("haven")) install.packages("haven")
if (!require("tidyverse")) install.packages("tidyverse")
if (!require("foreign")) install.packages("foreign")
if (!require("survey")) install.packages("survey")
library(dplyr)
library(stringr)
library(knitr)
ruta <- "C:/Users/M S I/OneDrive/ymgc/notebook/r/pa_grupo3"
setwd(ruta)
getwd()
m_empleo <- read_dta(paste("./enaho01a-2023-500.dta",sep="/"))
m_educacion <- read_dta(paste("./enaho01a-2023-300.dta",sep="/"))
m_miembros <- read_dta(paste("./enaho01-2023-200.dta",sep="/"))
datos <- left_join(m_empleo, m_educacion, by = c("conglome", "vivienda", "hogar", "codperso"))
datos <- left_join(datos, m_miembros, by = c("conglome", "vivienda", "hogar", "codperso"))
datos <- datos %>% rename(edad =p208a)
table(datos$edad, useNA = "alw")
jovenes <- datos %>% filter(edad >= 15 & edad <= 29)
table(jovenes$edad, useNA = "alw")
rm(datos, m_educacion, m_empleo, m_miembros)
table(jovenes$p204, useNA = "alw")
table(jovenes$p205, useNA = "alw")
table(jovenes$p206, useNA = "alw")
jovenes <- jovenes %>% mutate(residencia = ifelse((p204 == 1 & p205 == 2) | (p204 == 2 & p206 == 1), 1, 0))
table(jovenes$residencia, useNA = "alw")
jovenes <- jovenes %>% filter(residencia == 1)
table(jovenes$residencia, useNA = "alw")
jovenes$departamento <- as.numeric(substr(jovenes$ubigeo, 1, 2))
jovenes <- jovenes %>% mutate(departamento = recode(departamento, '1' = "Amazonas", '2' = "Ancash", '3' = "Apurímac",
'4' = "Arequipa", '5' = "Ayacucho", '6' = "Cajamarca", '7' = "Callao",
'8' = "Cusco", '9' = "Huancavelica", '10' = "Huánuco", '11' = "Ica",
'12' = "Junín", '13' = "La Libertad", '14' = "Lambayeque", '15' = "Lima",
'16' = "Loreto", '17' = "Madre de Dios", '18' = "Moquegua",
'19' = "Pasco", '20' = "Piura", '21' = "Puno", '22' = "San Martín",
'23' = "Tacna", '24' = "Tumbes", '25' = "Ucayali"))
table(jovenes$departamento, useNA = "alw")
table(jovenes$estrato, useNA = "alw")
jovenes <- jovenes %>% mutate( area = ifelse(estrato>=1 & estrato<=5, "Urbano", ifelse(estrato>=6 & estrato<=8, "Rural", NA )))
table(jovenes$area, useNA = "alw")
table(jovenes$p207, useNA = "alw")
jovenes <- jovenes %>% mutate(sexo = ifelse(p207==1, "Hombre", ifelse(p207==2, "Mujer", NA)))
table(jovenes$sexo, useNA = "alw")
table(jovenes$dominio, useNA = "alw")
jovenes <- jovenes %>% mutate(region = ifelse( (dominio>=1 & dominio<=3) | dominio==8, "Costa",
ifelse(dominio>=4 & dominio<=6, "Sierra",
ifelse(dominio==7, "Selva", NA))))
table(jovenes$region, useNA = "alw")
table(jovenes$edad, useNA = "alw")
jovenes <- jovenes %>% mutate(gedad = case_when( edad %in% c(15:17) ~ "De 15 a 17 años",
edad %in% c(18:24) ~ "De 18 a 24 años",
edad %in% c(25:29) ~ "De 25 a 29 años"))
table(jovenes$gedad, useNA = "alw")
table(jovenes$p301a.x, useNA = "alw")
jovenes <- jovenes %>% mutate(nivel_educ = ifelse( (p301a.x>=1 & p301a.x<=4) | p301a.x==12, "Primaria",
ifelse( (p301a.x>=5 & p301a.x<=6), "Secundaria",
ifelse( (p301a.x>=7 & p301a.x<=8), "SNU",
ifelse( (p301a.x>=9 & p301a.x<=11), "SU", NA)))))
table(jovenes$nivel_educ, useNA = "alw")
table(jovenes$p300a, useNA = "alw")
jovenes <- jovenes %>% mutate(lengua = ifelse(p300a==4, "Castellano", "Lengua nativa"))
table(jovenes$lengua, useNA = "alw")
table(jovenes$ocu500, useNA = "alw")
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(p307 = ifelse(is.na(p307), 2, p307))
table(jovenes$p307, useNA = "alw")
jovenes <- jovenes %>% mutate(nini = ifelse( (ocu500==3 | ocu500==4) & (p307==2), 1, 0))
table(jovenes$nini, useNA = "alw")
jovenes <- jovenes %>% select(departamento, area, sexo, region, gedad, nivel_educ, lengua, nini, conglome, estrato, fac500a)
save(jovenes, file=paste("./joevenes15a29.RData",sep="/"))
load(paste("./joevenes15a29.RData",sep="/"))
encuesta = svydesign(data=jovenes, id=~conglome, strata=~estrato, weights=~fac500a)
nini <- svymean(~nini, encuesta, deff=F, na.rm=T)
nini
nini_dpto <- svyby(~nini, ~departamento, encuesta, svymean, deff=F, na.rm=T)
nini_dpto <- nini_dpto %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_dpto, digits = 2, row.names = FALSE,
col.names = c("Departamento", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_area <- svyby(~nini, ~area, encuesta, svymean, deff=F, na.rm=T)
nini_area <- nini_area %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_area, digits = 2, row.names = FALSE, col.names = c("Área de residencia", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_sexo <- svyby(~nini, ~sexo, encuesta, svymean, deff=F, na.rm=T)
nini_sexo <- nini_sexo %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_sexo, digits = 2, row.names = FALSE, col.names = c("Sexo", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_region <- svyby(~nini, ~region, encuesta, svymean, deff=F, na.rm=T)
nini_region <- nini_region %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_region, digits = 2, row.names = FALSE, col.names = c("Region natural", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_edad <- svyby(~nini, ~gedad, encuesta, svymean, deff=F, na.rm=T)
nini_edad <- nini_edad %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)),
cv = round((se/nini)*100,2))
kable(nini_edad, digits = 2, col.names = c("Grupo de edad", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_nivel_educ <- svyby(~nini, ~nivel_educ, encuesta, svymean, deff=F, na.rm=T)
nini_nivel_educ <- nini_nivel_educ %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_nivel_educ, digits = 2, col.names = c("Nivel educativo", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
nini_lengua <- svyby(~nini, ~lengua, encuesta, svymean, deff=F, na.rm=T)
nini_lengua <- nini_lengua %>% mutate(across(where(is.numeric), ~ round(. * 100, 2)))
kable(nini_lengua, digits = 2, col.names = c("Lengua materna", "Proporción Nini", "Error estándar", "Coeficiente de variación (%)"))
